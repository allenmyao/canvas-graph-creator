// import { Node } from '../data/node/node';
// import { Edge } from '../data/edge/edge';
// import Step from '../algorithm/step';

/**
 * Stores the results generated by running an Algorithm. An instance will be stored in each Algorithm object.
 * @class AlgorithmResult
 */
class AlgorithmResult {

  /**
   * Array of Step objects.
   * @type {Array.<Step>}
   */
  timeline;

  /**
   * Current index in the timeline.
   * @type {number}
   */
  stepIndex;

  /**
   * Constructs an instance of AlgorithmResult.
   * @param  {Array.<string>} nodeFields - Array of fields to store changes for in Node objects.
   * @param  {Array.<string>} edgeFields - Array of fields to store changes for in Edge objects.
   * @constructs AlgorithmResult
   */
  constructor() {
    this.timeline = [];
    this.stepIndex = -1;
  }

  stepForward() {
    if (this.stepIndex === this.timeline.length) {
      console.log('Already at final step');
      return false;
    }
    if (this.stepIndex > -1) {
      let currentStep = this.timeline[this.stepIndex];
      currentStep.applyPost();
      console.log(currentStep.description);
    }
    if (this.stepIndex < this.timeline.length - 1) {
      let nextStep = this.timeline[this.stepIndex + 1];
      nextStep.applyDuring();
      console.log(nextStep.description);
    }
    this.stepIndex++;
    return true;
  }

  stepBackward() {
    if (this.stepIndex === -1) {
      console.log('Already at initial step');
      return false;
    }
    if (this.stepIndex < this.timeline.length) {
      let currentStep = this.timeline[this.stepIndex];
      currentStep.applyPre();
      console.log(currentStep.description);
    }
    if (this.stepIndex > 0) {
      let previousStep = this.timeline[this.stepIndex - 1];
      previousStep.applyDuring();
      console.log(previousStep.description);
    }
    this.stepIndex--;
    return true;
  }

  /**
   * Add a Step to the AlgorithmResult.
   * @param {Step} step - The step to add.
   */
  addStep(step) {
    this.timeline.push(step);
  }
}

export { AlgorithmResult };
export default AlgorithmResult;
